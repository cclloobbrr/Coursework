namespace CourseworkLibrary
{
    public class StartWrite
    {
        public static void WriteDefault(int nx, int ny, int nz, double lx, double ly, double lz, double tMax, double dt, double alpha)
        {
            Console.Clear();
            Console.WriteLine($"" +
                $"Кол-во узлов сетки по x\t\tnx = {nx}\n" +
                $"Кол-во узлов сетки по y\t\tny = {ny}\n" +
                $"Кол-во узлов сетки по z\t\tnz = {nz}\n" +
                $"Длинна области по x\t\tlx = {lx}\n" +
                $"Длинна области по y\t\tly = {ly}\n" +
                $"Длинна области по z\t\tlz = {lz}\n" +
                $"Максимальное время\t\ttMax = {tMax}\n" +
                $"Шаг по времени\t\t\tdt = {dt}\n" +
                $"Коэффициент теплопроводности\talpha = {alpha}\n\n" +
                $"Начальные условия\tu = 0.0");
        }
        public static void Write()
        {
            Console.Clear();
            Console.WriteLine($"" +
                $"Кол-во узлов сетки по x\t\tnx = NaN\n" +
                $"Кол-во узлов сетки по y\t\tny = NaN\n" +
                $"Кол-во узлов сетки по z\t\tnz = NaN\n" +
                $"Длинна области по x\t\tlx = NaN\n" +
                $"Длинна области по y\t\tly = NaN\n" +
                $"Длинна области по z\t\tlz = NaN\n" +
                $"Максимальное время\t\ttMax = NaN\n" +
                $"Шаг по времени\t\t\tdt = NaN\n" +
                $"Коэффициент теплопроводности\talpha = NaN\n\n" +
                $"Начальные условия\tu = NaN");
        }
        public static void Write(int nx)
        {
            Console.Clear();
            Console.WriteLine($"" +
                $"Кол-во узлов сетки по x\t\tnx = {nx}\n" +
                $"Кол-во узлов сетки по y\t\tny = NaN\n" +
                $"Кол-во узлов сетки по z\t\tnz = NaN\n" +
                $"Длинна области по x\t\tlx = NaN\n" +
                $"Длинна области по y\t\tly = NaN\n" +
                $"Длинна области по z\t\tlz = NaN\n" +
                $"Максимальное время\t\ttMax = NaN\n" +
                $"Шаг по времени\t\t\tdt = NaN\n" +
                $"Коэффициент теплопроводности\talpha = NaN\n\n" +
                $"Начальные условия\tu = NaN");
        }
        public static void Write(int nx, int ny)
        {
            Console.Clear();
            Console.WriteLine($"" +
                $"Кол-во узлов сетки по x\t\tnx = {nx}\n" +
                $"Кол-во узлов сетки по y\t\tny = {ny}\n" +
                $"Кол-во узлов сетки по z\t\tnz = NaN\n" +
                $"Длинна области по x\t\tlx = NaN\n" +
                $"Длинна области по y\t\tly = NaN\n" +
                $"Длинна области по z\t\tlz = NaN\n" +
                $"Максимальное время\t\ttMax = NaN\n" +
                $"Шаг по времени\t\t\tdt = NaN\n" +
                $"Коэффициент теплопроводности\talpha = NaN\n\n" +
                $"Начальные условия\tu = NaN");
        }
        public static void Write(int nx, int ny, int nz)
        {
            Console.Clear();
            Console.WriteLine($"" +
                $"Кол-во узлов сетки по x\t\tnx = {nx}\n" +
                $"Кол-во узлов сетки по y\t\tny = {ny}\n" +
                $"Кол-во узлов сетки по z\t\tnz = {nz}\n" +
                $"Длинна области по x\t\tlx = NaN\n" +
                $"Длинна области по y\t\tly = NaN\n" +
                $"Длинна области по z\t\tlz = NaN\n" +
                $"Максимальное время\t\ttMax = NaN\n" +
                $"Шаг по времени\t\t\tdt = NaN\n" +
                $"Коэффициент теплопроводности\talpha = NaN\n\n" +
                $"Начальные условия\tu = NaN");
        }
        public static void Write(int nx, int ny, int nz, double lx)
        {
            Console.Clear();
            Console.WriteLine($"" +
                $"Кол-во узлов сетки по x\t\tnx = {nx}\n" +
                $"Кол-во узлов сетки по y\t\tny = {ny}\n" +
                $"Кол-во узлов сетки по z\t\tnz = {nz}\n" +
                $"Длинна области по x\t\tlx = {lx}\n" +
                $"Длинна области по y\t\tly = NaN\n" +
                $"Длинна области по z\t\tlz = NaN\n" +
                $"Максимальное время\t\ttMax = NaN\n" +
                $"Шаг по времени\t\t\tdt = NaN\n" +
                $"Коэффициент теплопроводности\talpha = NaN\n\n" +
                $"Начальные условия\tu = NaN");
        }
        public static void Write(int nx, int ny, int nz, double lx, double ly)
        {
            Console.Clear();
            Console.WriteLine($"" +
                $"Кол-во узлов сетки по x\t\tnx = {nx}\n" +
                $"Кол-во узлов сетки по y\t\tny = {ny}\n" +
                $"Кол-во узлов сетки по z\t\tnz = {nz}\n" +
                $"Длинна области по x\t\tlx = {lx}\n" +
                $"Длинна области по y\t\tly = {ly}\n" +
                $"Длинна области по z\t\tlz = NaN\n" +
                $"Максимальное время\t\ttMax = NaN\n" +
                $"Шаг по времени\t\t\tdt = NaN\n" +
                $"Коэффициент теплопроводности\talpha = NaN\n\n" +
                $"Начальные условия\tu = NaN");
        }
        public static void Write(int nx, int ny, int nz, double lx, double ly, double lz)
        {
            Console.Clear();
            Console.WriteLine($"" +
                $"Кол-во узлов сетки по x\t\tnx = {nx}\n" +
                $"Кол-во узлов сетки по y\t\tny = {ny}\n" +
                $"Кол-во узлов сетки по z\t\tnz = {nz}\n" +
                $"Длинна области по x\t\tlx = {lx}\n" +
                $"Длинна области по y\t\tly = {ly}\n" +
                $"Длинна области по z\t\tlz = {lz}\n" +
                $"Максимальное время\t\ttMax = NaN\n" +
                $"Шаг по времени\t\t\tdt = NaN\n" +
                $"Коэффициент теплопроводности\talpha = NaN\n\n" +
                $"Начальные условия\tu = NaN");
        }
        public static void Write(int nx, int ny, int nz, double lx, double ly, double lz, double tMax)
        {
            Console.Clear();
            Console.WriteLine($"" +
                $"Кол-во узлов сетки по x\t\tnx = {nx}\n" +
                $"Кол-во узлов сетки по y\t\tny = {ny}\n" +
                $"Кол-во узлов сетки по z\t\tnz = {nz}\n" +
                $"Длинна области по x\t\tlx = {lx}\n" +
                $"Длинна области по y\t\tly = {ly}\n" +
                $"Длинна области по z\t\tlz = {lz}\n" +
                $"Максимальное время\t\ttMax = {tMax}\n" +
                $"Шаг по времени\t\t\tdt = NaN\n" +
                $"Коэффициент теплопроводности\talpha = NaN\n\n" +
                $"Начальные условия\tu = NaN");
        }
        public static void Write(int nx, int ny, int nz, double lx, double ly, double lz, double tMax, double dt)
        {
            Console.Clear();
            Console.WriteLine($"" +
                $"Кол-во узлов сетки по x\t\tnx = {nx}\n" +
                $"Кол-во узлов сетки по y\t\tny = {ny}\n" +
                $"Кол-во узлов сетки по z\t\tnz = {nz}\n" +
                $"Длинна области по x\t\tlx = {lx}\n" +
                $"Длинна области по y\t\tly = {ly}\n" +
                $"Длинна области по z\t\tlz = {lz}\n" +
                $"Максимальное время\t\ttMax = {tMax}\n" +
                $"Шаг по времени\t\t\tdt = {dt}\n" +
                $"Коэффициент теплопроводности\talpha = NaN\n\n" +
                $"Начальные условия\tu = NaN");
        }
        public static void Write(int nx, int ny, int nz, double lx, double ly, double lz, double tMax, double dt, double alpha)
        {
            Console.Clear();
            Console.WriteLine($"" +
                $"Кол-во узлов сетки по x\t\tnx = {nx}\n" +
                $"Кол-во узлов сетки по y\t\tny = {ny}\n" +
                $"Кол-во узлов сетки по z\t\tnz = {nz}\n" +
                $"Длинна области по x\t\tlx = {lx}\n" +
                $"Длинна области по y\t\tly = {ly}\n" +
                $"Длинна области по z\t\tlz = {lz}\n" +
                $"Максимальное время\t\ttMax = {tMax}\n" +
                $"Шаг по времени\t\t\tdt = {dt}\n" +
                $"Коэффициент теплопроводности\talpha = {alpha}\n\n" +
                $"Начальные условия\tu = NaN");
        }

        public static void Write(int nx, int ny, int nz, double lx, double ly, double lz, double tMax, double dt, double alpha, string description)
        {
            Console.Clear();
            Console.WriteLine($"" +
                $"Кол-во узлов сетки по x\t\tnx = {nx}\n" +
                $"Кол-во узлов сетки по y\t\tny = {ny}\n" +
                $"Кол-во узлов сетки по z\t\tnz = {nz}\n" +
                $"Длинна области по x\t\tlx = {lx}\n" +
                $"Длинна области по y\t\tly = {ly}\n" +
                $"Длинна области по z\t\tlz = {lz}\n" +
                $"Максимальное время\t\ttMax = {tMax}\n" +
                $"Шаг по времени\t\t\tdt = {dt}\n" +
                $"Коэффициент теплопроводности\talpha = {alpha}\n\n" +
                $"Начальные условия\tu = {description}");
        }

        public static (Func<double, double, double, double> function, string description) InitialCondition(double lx, double ly, double lz)
        {

            Console.WriteLine("" +
                "Выберите тип начального условия:\n" +
                "1 - Однородная начальная температура.\n" +
                "2 - Линейный градиент по заданной оси.\n" +
                "3 - Радиальная симметрия (горячая точка в центре).\n" +
                "4 - Слоистая структура.\n" +
                "5 - Случайные флуктуации.\n" +
                "6 - Периодическая структура.\n" +
                "7 - Точечные источники тепла(в разработке)\n" +
                "8 - Температурный вихрь\n");
            string switchValue1 = Console.ReadLine();
            string switchValue2;

            double T0, T1, T2, T3, T_Min, T_Max, A, theta, lambda_x, lambda_y, deltaT, sigma;
            Random rand = new Random();

            switch (switchValue1)
            {
                case "2":
                    Console.WriteLine("Выберите ось:");
                    switchValue2 = Console.ReadLine();
                    Console.WriteLine("Введите минимальную температуру:");
                    T_Min = Convert.ToDouble(Console.ReadLine());
                    Console.WriteLine("Введите максимальную температуру:");
                    T_Max = Convert.ToDouble(Console.ReadLine());
                    switch (switchValue2)
                    {
                        default:
                            return ((x, y, z) => T_Min + (T_Max - T_Min) * x / lx,
                                "(x, y, z) => T_Min + (T_Max - T_Min) * x / lx");

                        case "y":
                            return ((x, y, z) => T_Min + (T_Max - T_Min) * y / ly,
                                "(x, y, z) => T_Min + (T_Max - T_Min) * y / ly");

                        case "z":
                            return ((x, y, z) => T_Min + (T_Max - T_Min) * z / lz,
                                "(x, y, z) => T_Min + (T_Max - T_Min) * z / lz");
                    }

                case "3":
                    Console.WriteLine("Введите температуру в центре:");
                    T0 = Convert.ToDouble(Console.ReadLine());
                    Console.WriteLine("Введите \"ширину\" гауссова расширения:");
                    sigma = Convert.ToDouble(Console.ReadLine());
                    return ((x, y, z) => {
                        double r = Math.Sqrt(Math.Pow(x - lx / 2, 2) + Math.Pow(y - ly / 2, 2) + Math.Pow(z - lz / 2, 2));
                        return T0 * Math.Exp(-r * r / (2 * sigma * sigma));
                    },
                    "(x, y, z) => {\n" +
                    "\t\t\tdouble r = Math.Sqrt(Math.Pow(x - lx / 2, 2) + Math.Pow(y - ly / 2, 2) + Math.Pow(z - lz / 2, 2));\n" +
                    "\t\t\treturn T0 * Math.Exp(-r * r / (2 * sigma * sigma))}");

                case "4":
                    Console.WriteLine("Задайте 3 различных температурных слоя:");
                    Console.WriteLine("Первый слой (T1):");
                    T1 = Convert.ToDouble(Console.ReadLine());
                    Console.WriteLine("Второй слой (T2):");
                    T2 = Convert.ToDouble(Console.ReadLine());
                    Console.WriteLine("Третий слой (T3):");
                    T3 = Convert.ToDouble(Console.ReadLine());
                    return ((x, y, z) => {
                        if (z < lz / 3) return T1;
                        if (z < 2 * lz / 3) return T2;
                        return T3;
                    },
                        $"(x, y, z) =>\n" +
                        $"\t\t\tесли (z < lz / 3) вернуть T1;\n" +
                        $"\t\t\tесли (z < 2 * lz / 3) return T2;\n" +
                        $"\t\t\tиначе вернуть T3;");

                case "5":
                    Console.WriteLine("Задайте базовую температуру:");
                    T0 = Convert.ToDouble(Console.ReadLine());
                    Console.WriteLine("Задайте амплитуду случайных отклонений температуры:");
                    deltaT = Convert.ToDouble(Console.ReadLine());
                    return ((x, y, z) => T0 + deltaT * (2 * rand.NextDouble() - 1),
                        $"(x, y, z) => {T0} + {deltaT} * (2 * random(-1, 1)");

                case "6":
                    Console.WriteLine("Задайте базовую температуру:");
                    T0 = Convert.ToDouble(Console.ReadLine());
                    Console.WriteLine("Задайте амплитуду температурных колебаний:");
                    A = Convert.ToDouble(Console.ReadLine());
                    lambda_x = lx / 2;
                    lambda_y = ly / 2;
                    return ((x, y, z) => T0 + A * Math.Sin(2 * Math.PI * x / lambda_x) * Math.Sin(2 * Math.PI * y / lambda_y),
                        $"(x, y, z) => {T0} + {A} * Math.Sin(2 * Math.PI * x / lambda_x) * Math.Sin(2 * Math.PI * y / lambda_y)");

                case "8":
                    Console.WriteLine("Задайте базовую температуру:");
                    T0 = Convert.ToDouble(Console.ReadLine());
                    Console.WriteLine("Задайте амплитуду температурных колебаний:");
                    A = Convert.ToDouble(Console.ReadLine());
                    return ((x, y, z) =>
                    {
                        theta = Math.Atan2(y - ly / 2, x - lx / 2);
                        return T0 + A * (1 + Math.Sin(theta)) / 2;
                    }, $"" +
                    $"{T0} + {A} * (1 + sin(theta))/2\n" +
                    $"\t\t\tгде theta = atan2(y - {ly}/2, x - {lx}/2)");

                default:
                    Console.WriteLine("Задайте базовую температуру:");
                    T0 = Convert.ToDouble(Console.ReadLine());
                    return ((x, y, z) => T0, $"(x, y, z) => {T0}");

            }
        }


    }
}
